import{d as B,e as h,s as Q,o as u,c as v,b as e,p as V,u as i,f as S,F as j,g as L,v as R,h as w,a as C,w as k,i as I,T as D,j as N,k as U,q as Y,l as x}from"./index.242de1df.js";const F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEfSURBVHgBrdFPUsIwFAbw94VWtx4Fb1BPwN6iUP+t9QSUE+jajqNQu8cTOJ5AvAFH6JZK+0yqU6iEgYZ8m0xekt/kJSDDvI6jWwADEKVc8MjvXYeqDjJIEkehPDqoFQseKrQx+Heze90aM981ApPksZ1l7uzAyd/ltK3ZkgraMWWbhfg8dPNOtmidyNJUt28ncPXNmOllM4qHrS1rP0AdBfXn3623ZfsI/bPLIUyw/6grb9ztXo3KmilWZVEc+8FN1brYC1NtrmDaGzbC5JutVW1iNdAGVoHJ+KlP4GfaE1P5/RRwhyxgS5DIs4GVYBxHnhyPbGAlKCB6tjAVB0we12upnE8Fi/D0/OKDGsZhpQEzOU4EYTLP8RUEQUqG+QHtxIW0zN1l3QAAAABJRU5ErkJggg==",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgBrVVRTsJAEJ3ZFuSTI5QbcAQ4CfJBTGMMcgLLCcAoKcpH9SToDbiBPQIfxlS6dJ0hrK5Nl5bAS5psd3deZ+e9nSJYEEVR8+s77dGwk4FoIyiP5xVgTONYIL5glr77vh8XxWMR4Wcib2lhSKtNKIFSML7xB8FB4jCMvAy3S7XPrip2J1Dbrpk9nkpqIxd64RRSBtWeEnOWEyrlL/FDuAhOITXJ6xs55DFyCbYoP+BcULBOG25LZJB2bHtSJVupcltssb84FfM8uaFbGEROqpNNhULs2Ygb9Iz8fiyV02VyJpUk0IgEcsGNwY6O4LrYVlmMMAw9Ta5JtYOscQBtfJwvFBxA3kZVbSmgBPR1SIz3ZD9XBmEKk4dZU87ULEtZnBCYrWwb8jXN19wWh9yoZvPnIX19WrTBIVuxN8ya6ppLcD1EKBYQ8RL5CtYSuiAVOllVsM/FqN9fo4ApnAl0ioDLt3PFpu7eHxKjKli066vBmMc7Ys66TOkqpCy2fv/X6CekvktC4ZGdzrRlIbHG7GlxR00mgDJC6mSC9OFS8qnNNbQFcfYOdT76afa4n5g/UwHZim7fm7yoveYJNX4AMWciBxzcZmwAAAAASUVORK5CYII=",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJISURBVHgB5VRtTttAEJ1Zx5D+yxE4QjhB3ROQniBByocgIKUnSHKCBpWQQirZvQE9AeEETW9AT1CkVhWJP6YzNnYds7YR+cn8sXa9+97Mm3kLsGVMp1f1ov8KtohPs/mIDPwu37wzCFuAI8IwXhPB+PSoM9qawLbt2p8Hb5AGLyIpJXgErBsKDgIC0dsqOp8lKSRgGRzOtJnaWvCNZYQEg+eQ5BJMZ1ctQrT5uKMUOCvT/PHh8PA++X85HzLQqIwkl+D88/yGs6ydHHX2c5MoIUF/va8d04+sO4jWiiUpiH6vM2YJR1pw3u/3+0stQWXtW/JVSNdQEjqSEJz3QwzdJUVwQEB3x93ubXpf+nJx+aWpI+FuTrLguQQcFsKmPHHTAyJHRxLHeqdytpFs9gCPpsXZ73EuiTziBUCVGCvQIUceWaQnTUuAbCj5uruVRJ6/K9cWUpGNNWid9Npf03eSoYg9kooKPA0rnUn4oAE0ZM/bNd9nMwxB2OniKN1QbBDMZvaeT3IYW7I+v5gP+OIw27hsKMQmVwdixkKCAFxLzO0G7q2QeeANDSY7zkjyWJkl75NP2Ah7xlOkrS694ClpciLLKlTBR8/2fHrHdg91lUb/fnAbBsJbYlAGrPHjxx9aMMHktNc90xT3/y2SRpkr75dkgkS1NfnjqlSFBnsCpQdWmATBvWhNqBbujvFNl7W2gti9Ah6u0bzxw3GVCcQ7RJoIcNZ8ZZEQRO4NwVpRaVHpbyrqut1u/4QXRkJASHXO3nlu6a8n/gGQYh+hb5i7lgAAAABJRU5ErkJggg==",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD1SURBVHgB1ZTtDYIwEIbfqwzgCIzgCm7gCP7Bj6A/nECYQBMl9WsHR3AFR2AEFtDzzkSCBFCEPz5JU1J6T+7S9iiyhyGDViB00QACx0QmcEBmCXAjmSJJuXzntcNgVxdmE4/QgO3uyFqlQcs4qMnGHgMiLJkRzqdekP9fO0OVZedawig69Ky1bk4YZOc8pSVraSxZ3NhJRNz3/dFV1/2xF8oUlsWZMllakpwcG7potvgCUyl7USDd7E8DHZXCQlmB9LmP+axDv9+2PS+koNegVPaBbGya4a+yfGzrL+UfhIwELSGdKzbSGBfSd2I0RE466UiDfQBSUGOyfUKWIQAAAABJRU5ErkJggg==",G={class:"fixed top-0 left-0 w-screen h-screen flex justify-center items-center z-30 font-notosans-light"},X={class:"relative pc:w-[830px] pc:h-[550px] bg-white flex flex-col justify-between items-center py-4 px-6 text-style3 rounded-px35 z-10 select-none"},z=e("div",{class:"text-xs tracking-[5px] my-2"},"\u5728\u6846\u683C\u5167\u7C3D\u4E0B\u5927\u540D!",-1),H=e("canvas",{id:"canvas",class:"createsinature w-[760px] h-[360px]"},null,-1),K={class:"w-full flex justify-between items-center text-sm tracking-[5px] px-2"},M={class:"flex justify-start item-center"},Z=e("div",{class:"absolute top-0 w-full h-full bg-black opacity-20"},null,-1),q=B({__name:"createSignature",emits:["togglecreatesignaturemodal","get_signature_in_localstorage"],setup(_,{emit:c}){let d=h(!1);Q(()=>{const t=document.getElementById("canvas");let s=t.getContext("2d");s.lineWidth=1;let r=!1;const o=a=>{const l=t.getBoundingClientRect();return a.type==="mousemove"?{x:(a.clientX-l.left)*.4,y:(a.clientY-l.top)*.4}:{x:(a.touches[0].clientX-l.left)*.4,y:(a.touches[0].clientY-l.top)*.4}},f=a=>{a.preventDefault(),r=!0},g=()=>{r=!1,s.beginPath()},n=a=>{if(!r)return;const l=o(a);s.lineTo(l.x,l.y),s.stroke(),d.value=!0};t.addEventListener("mousedown",f),t.addEventListener("mouseup",g),t.addEventListener("mouseleave",g),t.addEventListener("mousemove",n),t.addEventListener("touchstart",f),t.addEventListener("touchend",g),t.addEventListener("touchcancel",g),t.addEventListener("touchmove",n)});const p=()=>{const t=document.getElementById("canvas");t.getContext("2d").clearRect(0,0,t.width,t.height),d.value=!1},A=()=>{if(!d.value)return alert("\u8ACB\u7C3D\u540D!");const s=document.getElementById("canvas").toDataURL("image/png");let r=localStorage.getItem("signature");if(!r)return localStorage.setItem("signature",JSON.stringify([s]));let o=JSON.parse(r);o.unshift(s),localStorage.setItem("signature",JSON.stringify(o)),c("get_signature_in_localstorage"),c("togglecreatesignaturemodal")};return(t,s)=>(u(),v("div",G,[e("div",X,[z,H,e("div",K,[e("div",{class:"text-style1 tracking-[3px] cursor-pointer",onClick:p},"\u6E05\u9664"),e("div",M,[e("div",{class:"pc:w-[180px] pc:h-[60px] flex justify-center items-center bg-bg1 rounded-full drop-shadow-shadow2 text-style1 hover:text-style5 active:text-style5 cursor-pointer active:scale-95",onClick:s[0]||(s[0]=r=>c("togglecreatesignaturemodal"))},"\u53D6\u6D88"),e("div",{class:V(["pc:w-[180px] pc:h-[60px] flex justify-center items-center ml-4 rounded-full drop-shadow-shadow2 transition-all duration-200 bg-bg2 text-white cursor-pointer active:scale-95",i(d)?["bg-gradient-to-t","from-gradbg2","to-gradbg1","bg-top","hover:bg-bottom","bg-bgtrans1","text-white"]:""]),onClick:A},"\u7C3D\u597D\u4E86",2)])])]),Z]))}});const $={class:"fixed top-0 left-0 w-screen h-screen flex justify-center items-center z-30 font-notosans-light"},ee={class:"relative pc:w-[830px] pc:h-[297px] flex justify-center items-center text-style3 text-sm tracking-[3px] rounded-px35 bg-white z-10"},te=e("div",{class:""},"\u662F\u5426\u78BA\u5B9A\u522A\u9664\u8A72\u7C3D\u540D?",-1),se={class:"absolute right-4 bottom-4 flex justify-center items-center"},ae=e("div",{class:"absolute top-0 w-full h-full bg-black opacity-20"},null,-1),ne=B({__name:"deletesignaturemodal",props:{indexinSinatureArr:null},emits:["toggledeletesignaturemodal","get_signature_in_localstorage"],setup(_,{emit:c}){const d=_,p=async()=>{await new Promise((A,t)=>{let s=localStorage.getItem("signature"),r=JSON.parse(s);r.splice(d.indexinSinatureArr,1);let o=JSON.stringify(r);localStorage.setItem("signature",o),A(()=>{c("get_signature_in_localstorage"),c("toggledeletesignaturemodal")})})};return(A,t)=>(u(),v("div",$,[e("div",ee,[te,e("div",se,[e("div",{class:"w-44 h-14 flex justify-center items-center bg-bg1 rounded-full drop-shadow-shadow2 text-style1 hover:text-style5 active:text-style5 tracking-[5px] cursor-pointer active:scale-95",onClick:t[0]||(t[0]=s=>c("toggledeletesignaturemodal"))}," \u53D6\u6D88 "),e("div",{class:"w-44 h-14 ml-4 flex justify-center items-center text-white rounded-full drop-shadow-shadow2 bg-gradient-to-t from-gradbg2 to-gradbg1 bg-top hover:bg-bottom bg-bgtrans1 transition-all duration-200 tracking-[5px] cursor-pointer",onClick:p}," \u522A\u9664 ")])]),ae]))}}),oe={class:"relative w-screen h-heit1 pb-20 flex justify-start items-center bg-bg2 text-style3"},re={class:"h-full w-[400px] bg-white"},ie=U('<div class="h-[15%] px-[33px] flex flex-col justify-center item-start gap-2 border-b-bd1 border-bc2"><b class="font-extrabold h-7 px-1">\u6587\u4EF6\u540D\u7A31</b><div class="h-7 relative hover:border-bd1 border-bc1 cursor-pointer px-1"><input id="edit_filename" type="text" class="peer outline-none" maxlength="20" value="\u7DE8\u8F2F\u6587\u4EF6\u8CC7\u6599"><img src="'+F+'" alt="" class="absolute right-2 top-1 max-w-[18px] max-h-[18px] peer-focus:hidden"></div></div>',1),le={class:"scrollbarnone overflow-scroll h-[85%] px-[35px] flex flex-col justify-start item-start gap-y-3"},ce=e("div",{class:"mt-5 font-extrabold"},"\u6211\u7684\u7C3D\u540D",-1),de={class:"signature-bg relative h-14 flex justify-center items-center border-dashed hover:bg-bg1 cursor-pointer"},ge=["src"],ue=["onClick"],Ae=e("img",{src:T,alt:"",class:"ml-2 max-w-[21.37px] max-h-[21.37px]"},null,-1),pe=e("div",{class:"signature-bg h-14 flex justify-center items-center border-dashed hover:bg-bg1 cursor-pointer"},[R(" \u4E0A\u50B3\u5716\u7247 "),e("img",{src:W,alt:"",class:"ml-2 max-w-[21.37px] max-h-[21.37px]"})],-1),fe=U('<div class="scrollbarnone relative h-full w-full overflow-scroll"><canvas id="pdfcanvas" class="ml-52"></canvas></div><footer class="absolute bottom-0 left-0 w-screen h-20 flex justify-between items-center bg-bg1 px-60 font-notosans-light"><div>a</div><div class="flex justify-center items-center"><div class="flex justify-center items-center w-44 h-14 mr-3.5 rounded-full bg-white drop-shadow-shadow2 cursor-pointer text-style1 hover:text-style5 tracking-widest transition-all duration-200"> \u53D6\u6D88</div><div class="flex justify-center items-center w-44 h-14 bg-gradient-to-t from-gradbg2 to-gradbg1 bg-top hover:bg-bottom bg-bgtrans1 rounded-full drop-shadow-shadow1 cursor-pointer text-white tracking-[3px] font-notosans-light transition-all duration-200"> \u958B\u555F\u6587\u4EF6 </div></div></footer>',2),he=B({__name:"pdfEditpage",setup(_){const c=h([]),d=()=>{let o=localStorage.getItem("signature");o&&(c.value=JSON.parse(o))};d(),Q(()=>{const o=async n=>{const a="data:application/pdf;base64,";pdfjsLib.GlobalWorkerOptions.workerSrc="https://mozilla.github.io/pdf.js/build/pdf.worker.js";const l=window.atob(n.substring(a.length)),m=await(await pdfjsLib.getDocument({data:l}).promise).getPage(1),y=m.getViewport({scale:window.devicePixelRatio}),b=document.createElement("canvas"),P=b.getContext("2d");b.height=y.height,b.width=y.width;const J={canvasContext:P,viewport:y};return m.render(J).promise.then(()=>b)},f=async n=>{const a=1/window.devicePixelRatio;return new fabric.Image(n,{id:"renderPDF",scaleX:a,scaleY:a})};(async()=>{const n=new fabric.Canvas(document.getElementById("pdfcanvas"));n.requestRenderAll();let l=JSON.parse(localStorage.getItem("pdfDataArr"))[Y.currentRoute.value.params.pdfindex].pdf;const E=await o(l),m=await f(E);n.setWidth(m.width/window.devicePixelRatio),n.setHeight(m.height/window.devicePixelRatio+120),n.setBackgroundImage(m,n.renderAll.bind(n))})()});const p=h(!1),A=S.throttle(()=>p.value=!p.value,500,{trailing:!1}),t=h(0),s=h(!1),r=S.throttle(o=>{s.value=!s.value,t.value=o},500,{trailing:!1});return(o,f)=>(u(),v("div",oe,[e("aside",re,[ie,e("div",le,[ce,(u(!0),v(j,null,L(c.value,(g,n)=>(u(),v("div",de,[e("img",{src:g,alt:"",class:"max-h-14"},null,8,ge),e("img",{src:O,alt:"",onClick:a=>i(r)(n),class:"absolute right-2 bottom-4 z-10"},null,8,ue)]))),256)),e("div",{class:"signature-bg h-14 flex justify-center items-center border-dashed hover:bg-bg1 cursor-pointer",onClick:f[0]||(f[0]=(...g)=>i(A)&&i(A)(...g))},[R(" \u5275\u5EFA\u7C3D\u540D "),Ae]),pe])]),fe,(u(),w(N,{to:"#modal"},[C(D,{onBeforeEnter:i(x).opacity.Enter,onEnter:i(x).opacity.Enter,onLeave:i(x).opacity.Leave},{default:k(()=>[p.value?(u(),w(q,{key:0,onTogglecreatesignaturemodal:i(A),onGet_signature_in_localstorage:d},null,8,["onTogglecreatesignaturemodal"])):I("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])])),(u(),w(N,{to:"#modal"},[C(D,{onBeforeEnter:i(x).opacity.Enter,onEnter:i(x).opacity.Enter,onLeave:i(x).opacity.Leave},{default:k(()=>[s.value?(u(),w(ne,{key:0,indexinSinatureArr:t.value,onToggledeletesignaturemodal:i(r),onGet_signature_in_localstorage:d},null,8,["indexinSinatureArr","onToggledeletesignaturemodal"])):I("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])]))]))}});export{he as default};
